# CCTV-Server
산학협력 CCTV 관제 시스템 프로젝트 구현체(서버)<br>
진행 연도 2025년 7~10월

---

출간 논문 : 'CCTV 관제시스템의 인공지능을 활용한 데이터 다이어트 시스템 제안'(한국항행학회논문지, 2025, vol.29, no.5, pp. 621-626 (6 pages))

    https://www.kci.go.kr/kciportal/ci/sereArticleSearch/ciSereArtiView.kci?sereArticleSearchBean.artiId=ART003262551
    
컨퍼런스 논문 : 'AI 기반 데이터 마이닝 및 데이터 다이어트 VMS 시스템 제안'(컨퍼런스 논문.PDF)

---

1.왜 만들었는가? - 기존 GCS의 한계를 극복하기 위해 개발됨
<br>
CCTV 관제 시스템은 24시간 연속적으로 영상이 저장되기 때문에, 장기적으로 막대한 저장소 부족 문제가 발생한다.
실제 저장되는 구간 중 대부분의 구간은 분석 가치가 낮으며, 이러한 구간들로 인해 저장 용량이 낭비된다.
본 연구는 이러한 문제를 해결하기 위해, 중요 장면만을 고화질로 선별하여 저장하는 AI 기반 데이터 다이어트 시스템을 설계하였다.

---

2.무엇을 구현했는가? - AI 기반 데이터마이닝, 데이터다이어트 VMS(Video Management System)
<br>
본 연구에서는 CCTV 영상에 대해 AI 기반 객체 탐지->중요도 평가->가변 압축 및 저장으로 이어지는 일련의 로직을 구현하였다.

@전체 아키텍처 설계

-CCTV 단말에서 영상을 촬영 -> 컴퓨팅 노드에서 객체 탐지를 수행, 메타데이터를 생성 -> 메타데이터를 근거로 VMS에서 영상 화질, 비트레이트를 조정하여 저장

@라즈베리파이를 이용한 관제 구역 촬영

(1).저렴한 라즈베리파이 장치를 이용해 관제 구역을 촬영한다.

(2).라즈베리파이는 크기가 작으므로, 공간 효율성이 높고 설치가 용이하다.

(3).라즈베리파이에서 촬영된 영상 데이터는 객체 탐지를 위해 별도의 컴퓨팅노드로 전송된다.

@YOLOv8x 기반 객체 탐지

(1).CCTV에서 수신한 영상에 대해 객체 탐지를 수행한다.

(2).사람(person) 클래스를 대상으로 탐지 수를 산출한다.

(3).탐지 결과는 메타데이터로 변환하여 VMS에 전송한다.

@메타데이터 기반 중요도 판별 로직

(1).VMS는 메타데이터를 기반으로 영상의 중요도를 판단한다.

(2).전체 탐지 객체 수를 총합하여 요일, 근무시간 여부에 따라 관제 구역의 평균 객체 수를 산정한다.

(3).탐지된 객체 수가 평균을 초과하면 해당 구간을 중요 구간으로 분류한다.


@동적 압축 파이프라인 전환

(1).중요 구간 -> FHD(1920x1080, 7Mb/s) 고화질 저장

(2).비중요 구간 -> SD(640x480, 2.5Mb/s) 저화질 저장

(3).실시간으로 파이프라인을 전환하여 저장 효율을 증대한다.

<br>
<br>
<br>
<br>
<br>
3.어떤 점이 차별점인가?

@중요도 기준의 현실성, 정밀도 향상
기존 연구에서는 단순히 객체가 존재하는지 여부에 대해서만 판단하여 선별의 정확성이 낮았다.
이러한 한계를 보완하기 위해 본 연구에서는 요일, 근무시간별 평균 객체 수를 기준값으로 사용하여 선별의 정확도를 높혔다.

@데이터 삭제가 아닌 보존 기반의 데이터 다이어트 구조
기존 연구에서는 비중요 구간을 삭제해 저장공간을 확보하였으나, 이는 사후 검증 불가, 시간적 연송성 파괴 등의 문제가 발생하였다.
본 연구에서는 삭제가 아닌 저화질 저장을 통해 모든 데이터를 보존하였다. 이를 통해 장면 맥락을 보존하고, 사건 추적 및 법적 확인 가능, 운영 기록의 연속성을 유지한다.

@실시간 가변 파이프라인 전환
중요도 변화에 따라 실시간으로 영상 압축 파라미터를 변경하여 시스템의 안정성을 유지하면서 동적 제어가 가능하다.

<br>
<br>
<br>
<br>
<br>
4.상세 구현

@핵심 기능
-관제 구역 촬영(CCTV)
-객체 탐지 수행(컴퓨팅 노드)
-데이터 선별 저장(서버)

@사용 기술
-사용 라이브러리 : Boost asio, GStreamer, YOLO
-개발 언어 : C++(서버) / Python(CCTV, 컴퓨팅 노드)
-OS : Raspberry-Pi OS(라즈베리파이), debian(컴퓨팅 노드, VMS)
-DBMS : MariaDB
-사용 장비 : Raspberry-Pi 5, Raspberry-Pi Camera-module2, X86-64기반 컴퓨터 2대(컴퓨팅 노드, VMS)

@로직

(1).관제 구역 촬영 :

라즈베리파이에 연결된 카메라를 통해 관제구역을 촬영한다. 촬영한 영상은 GStreamer 라이브러리를 통해 각각 컴퓨팅 노드와 VMS로 전송된다.
화질은 FHD, 비트레이트는 7Mbps를 사용한다.

(2).객체 탐지 수행 :

컴퓨팅 노드는 라즈베리파이를 통해 촬영된 영상을 객체 탐지한다. 영상 속 탐지되는 사람 객체 수를 카운팅하여 VMS로 TCP 프로토콜을 사용하여 전송한다.

(3).메타데이터를 통한 중요도 산출 : 

VMS는 현재 수신한 객체 수를 기반으로 영상 구간의 중요도를 판단한다. 탐지된 객체 수가 평균 객체 수보다 크면 영상 구간을 중요하다고 판단한다.
컴퓨팅 노드로부터 수신한 객체 수는 추후 평균값 산정을 위해 DBMS에 저장된다.

(4).기준값(평균 객체 수) 산정 :

기준값은 요일별, 근무시간 여부를 토대로 산출한 탐지 객체 수의 평균값을 사용한다. 이러한 기준으로 평균 객체 수를 산출하는 이유는
요일별, 근무시간별 평균 탐지되는 객체 수가 유의미하게 달라질 수 있기 때문이다. 평일, 근무시간(9~18시)에는 많은 객체가 탐지될 수 있지만,
주말, 비근무 시간에는 적은 객체가 탐지될 것이다. 단순히 전체 탐지된 객체 수를 총합하여 평균을 산출할 경우 이러한 차이를 보정할 수 없으므로, 근무시간,요일별로 나눠서 평균값을 계산한다.

(5).파이프라인 교체 :

영상의 중요도에 따라 VMS는 두 가지 파이프라인 동적으로 교체하여 사용한다.

-FHD(1920x1080, 7Mb/s)

-SD(640x480, 2.5Mb/s)

중요 영상의 경우 FHD 화질로 저장하며, 비중요 영상의 경우 SD 화질로 저장한다.
파이프라인 교체는 내부 플래그를 통해 이루어진다. VMS는 GStreamer 루프를 도는 중 지속적으로 플래그를 통해 중요도를 확인한다. 
중요도가 변경된 경우 GStreamer 루프를 중단하고 파이프라인을 교체하여 영상 수신을 재개한다. 
이때 루프가 자주 재시작되어 영상 파일이 짧은 길이로 파편화되는 것을 막기 위해, FHD로 전환 시 5분간 플래그 변경을 잠궈둔다.
<br>
<br>
<br>
<br>
<br>
5.결과와 성과

@저장 용량 절감 효과
실제 환경에서 총 24시간 동안 SD, FHD, 제안시스템으로 촬영을 진행하였으며, 발생한 영상 데이터 용량을 비교하였다.

-FHD : 72 GiB

-SD : 24 GiB

-제안 시스템 : 33GiB

제안 시스템을 사용하였을 때, FHD 대비 54.17% 용량 절감 효과가 나타났다.

@검토해야할 영상 수 감소, 관리 효율성 향상
제안 시스템을 사용하였을 때, 총 168개의 영상이 생성되었으며, FHD(중요 구간)은 36개(21%) SD(비중요 구간)은 132개(79%)로
관제자가 실제로 검토해야하는 데이터량이 약 5분의 1 수준으로 감소하였다.
이를 통해 검색 시간 단축 및 운영 효율성이 향상되었다. 또한 비중요 데이터도 보존하므로 연속성과 맥락을 유지한다.


@논문 작성 및 수상

연구 설계, 구현, 실험 분석이 모두 포함된 완전한 실증 프로젝트로 구성되었다.
연구를 바탕으로 작성된 'CCTV 관제시스템의 인공지능을 활용한 데이터 다이어트 시스템 제안' 논문은 한국항행학회 논문지에 출간, KCI에 등재되었다.
또한 2025년 한국항행학회 종합학술대회에 출품하여, 우수논문상을 수상하였다.
<br>
<br>
<br>
<br>
<br>



